<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="logo.png">
    <title>300</title>

    <!-- Bootstrap CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- JQuery CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <style>
        @font-face {
            font-family: "okchan";
            src: url('OK CHAN.otf') format('truetype');
        }

        body {
            background-image: url('backgroundbottom.png')
        }

        * {
            font-family: "okchan";
        }

        h1 {
            font-size: 72px;
            vertical-align : top;
        }

        .mybtn {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
            margin: 20px auto 20px auto;
        }

        .mb-3 {
            width: 500px;
            padding: 20px 20px 20px 20px;
            margin: 20px auto 20px auto;
            border: 1px solid black;

            font-size: 20px;
        }

        .mytitle {
            width: auto;
            height: 50vh;
            background-image: url("main.jpg");
            background-position: center;
            background-size: cover;
            color: red;
            text-align: center;

            padding-top: 4vh;
        }

        .container {
            margin-top: 50px;
            text-align: center;

            font-size: 25px;
        }

        .fw-normal {
            color: red;
            font-size: 38px;
        }
        
    </style>
    <script type="module">
        // Firebase SDK 라이브러리 가져오기
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { query, orderBy } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";


        // Firebase 구성 정보 설정
        const firebaseConfig = {
            apiKey: ,
            authDomain: ,
            projectId: ,
            storageBucket: ,
            messagingSenderId: ,
            appId: 
        };


        // Firebase 인스턴스 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);



        $("#save").click(async function () {
            let name = $('#nick').val();
            let result = $('#comment').val();
            if (name.trim() === '' || result.trim() === '') {
                alert('닉네임과 댓글을 작성해주세요!');
                return;
            }

            $('#nick').val('');
            $('#comment').val('');

            let date = new Date().toLocaleDateString();
            let time = new Date().toLocaleTimeString();

            let doc = {
                'name': name,
                'result': result,
                'date': date,
                'time': time,

            };
            await addDoc(collection(db, "albums"), doc);
            alert('저장 완료!');
            window.location.reload();
        });


        let docs = await getDocs(query(collection(db, "albums"), orderBy("time", "desc")));
        docs.forEach((doc) => {
            let row = doc.data();
            let name = row['name'];
            let date = row['date'];
            let result = row['result'];
            let time = row['time'];

            let temp_html = `<tr>
                        <td>${name}</td>
                        <td>${result}</td>
                        <td>${date}</td>
                        <td>${time}</td>
                      </tr>`;
            $('#visit').append(temp_html);
        });

    </script>
</head>

<body>
    <div class="mytitle">
        <h1>Team 300</h1>
        <h4>개발자를 꿈꾸는 비전공자 용사들의 처절한 사투</h4>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-4">
                <!-- 이미지를 클릭하여 링크로 이동 -->
                <a href="jiwon.html">
                    <img class="bd-placeholder-img rounded-circle" src="https://i.imgur.com/pAePZPF.jpeg"
                        alt="Your Image" width="140" height="140">
                </a>
                <h2 class="fw-normal">이지원</h2>

            </div>
            <div class="col-lg-4">
                <a href="mujun.html">
                    <img class="bd-placeholder-img rounded-circle" src="https://i.imgur.com/pAePZPF.jpeg"
                        alt="Your Image" width="140" height="140">
                </a>
                <h2 class="fw-normal">이무준</h2>

            </div>
            <div class="col-lg-4">
                <a href="hjp.html">
                    <img class="bd-placeholder-img rounded-circle" src="https://i.imgur.com/pAePZPF.jpeg"
                        alt="Your Image" width="140" height="140">
                </a>
                <h2 class="fw-normal">박형조</h2>

            </div>
        </div>
    </div>
    <div class="mb-3">
        <label for="nick" class="form-label">닉네임</label>
        <input type="text" class="form-control" id="nick" placeholder="닉네임">
        <label for="comment" class="form-label">댓글</label>
        <textarea class="form-control" id="comment" rows="3"></textarea>
        <div class="mybtn">
            <button type="button" id="save" class="btn btn-primary">기록하기</button>
        </div>
    </div>
    <div>
        <div class="container">
            <table class="table" id="visit">
                <thead>
                    <tr>
                        <th style="color: #cca3a9" width="10%" scope="col">작성자</th>
                        <th style="color: #cca3a9" width="60%" scope="col">댓글 내용</th>
                        <th style="color: #cca3a9" width="10%" scope="col">작성일자</th>
                        <th style="color: #cca3a9" width=10% scope="col">작성시간</th>
                    </tr>
                </thead>

            </table>
        </div>
    </div>
    <div>
    </div>
</body>

</html>